version: '3'
services:
    ampq-php:
        build: docker/php
        depends_on:
          - ampq-rabbitmq
        container_name: ampq-php
        working_dir: /var/www/html
        volumes:
            - ./:/var/www/html
        networks:
            - ampq-net

    ampq-rabbitmq:
        container_name: ampq-rabbitmq
        image: rabbitmq:3.7.7-management-alpine
        ports:
            - 8082:15672
        environment:
            RABBITMQ_DEFAULT_VHOST: my_vhost
        networks:
            - ampq-net

networks:
    ampq-net:
        driver: bridge